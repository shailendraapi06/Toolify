<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>PDF Merger ‚Äì Combine Multiple PDFs into One File Online | ToolHub Pro</title>
    <meta name="description" content="Merge multiple PDF files into a single document instantly. Secure, fast, and 100% private browser-side PDF merging. No uploads, no server calls. Free online PDF joiner.">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2220%22 fill=%22%236366f1%22/><text y=%22.75em%22 x=%22.15em%22 font-size=%2260%22 fill=%22white%22 font-family=%22sans-serif%22 font-weight=%22900%22>PM</text></svg>">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Libraries -->
    <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>

    <style>
        :root {
            --primary: #6366f1;
            --primary-hover: #4f46e5;
            --primary-soft: rgba(99, 102, 241, 0.1);
            --secondary: #10b981;
            --dark: #0f172a;
            --slate-50: #f8fafc;
            --slate-100: #f1f5f9;
            --slate-200: #e2e8f0;
            --slate-300: #cbd5e1;
            --slate-400: #94a3b8;
            --slate-500: #64748b;
            --white: #ffffff;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
            --transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            --header-height: 72px;
            --radius-lg: 1.5rem;
            --radius-xl: 2rem;
        }

        /* Base Setup */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--slate-50);
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        .container { 
            width: 100%; 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 0 1.5rem;
        }

        @media (min-width: 768px) {
            .container { padding: 0 2.5rem; }
        }

        /* SEO Hidden H1 */
        .seo-h1 { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }

       /* header */
.header {
            position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;
            height: var(--header-height); display: flex; align-items: center;
            transition: var(--transition); background: transparent;
        }
        .header.scrolled {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            height: 70px;
            border-bottom: 1px solid var(--slate-200);
            box-shadow: var(--shadow-sm);
        }
        .nav { width: 100%; display: flex; justify-content: space-between; align-items: center; }
        
        /* Modern Logo Styling */
        .logo { 
            display: flex; 
            align-items: center; 
            gap: 0.8rem; 
            text-decoration: none; 
            font-weight: 800; 
            font-size: 1.5rem; 
            color: var(--dark);
            transition: var(--transition);
        }
        .logo-box { 
            background: var(--primary); 
            color: white; 
            width: 38px; 
            height: 38px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border-radius: 10px; 
            font-style: normal;
            box-shadow: 0 4px 10px rgba(79, 70, 229, 0.3);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        .logo-box svg {
            width: 22px;
            height: 22px;
            fill: currentColor;
        }
        .logo span { color: var(--primary); transition: var(--transition); }
        
        /* Logo Hover Animation */
        .logo:hover .logo-box {
            transform: rotate(10deg) scale(1.1);
            background: var(--primary-dark);
            box-shadow: 0 6px 15px rgba(79, 70, 229, 0.4);
        }
        .logo:hover span {
            color: var(--secondary);
            margin-left: 2px;
        }

        .nav-links { display: none; gap: 2rem; list-style: none; align-items: center; }
        .nav-item { position: relative; }
        .nav-link { 
            font-weight: 700; font-size: 0.95rem; color: var(--slate-600); text-decoration: none;
            padding: 10px 0; transition: var(--transition); display: flex; align-items: center; gap: 4px;
        }
        .nav-link:hover { color: var(--primary); }

        /* Dropdown */
        .dropdown {
            position: absolute; top: 100%; left: 50%; transform: translateX(-50%) translateY(10px);
            background: white; min-width: 220px; border-radius: 16px; padding: 1rem;
            box-shadow: var(--shadow-xl); border: 1px solid var(--slate-200);
            opacity: 0; visibility: hidden; transition: var(--transition);
        }
        .nav-item:hover .dropdown { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }
        .dropdown-item {
            padding: 0.8rem 1rem; text-decoration: none; color: var(--slate-600); font-weight: 600;
            display: block; border-radius: 8px; transition: var(--transition); font-size: 0.9rem;
        }
        .dropdown-item:hover { background: var(--slate-100); color: var(--primary); padding-left: 1.2rem; }

        /* Start Now Button Fix */
        .btn-cta {
            background: var(--dark); color: white; padding: 0.75rem 1.8rem;
            border-radius: 100px; font-weight: 700; font-size: 0.9rem;
            text-decoration: none; transition: var(--transition); border: 2px solid var(--dark);
            display: inline-flex; align-items: center; justify-content: center;
        }
        .btn-cta:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 8px 15px rgba(15, 23, 42, 0.2);
        }

        .mobile-toggle { display: flex; padding: 0.6rem; background: var(--slate-100); border: none; border-radius: 12px; cursor: pointer; color: var(--dark); }

        @media (min-width: 1024px) {
            .nav-links { display: flex; }
            .mobile-toggle { display: none; }
        }

        /* Mobile Menu */
        .mobile-menu {
            position: fixed; inset: 0; background: white; z-index: 2000;
            padding: 2rem; transform: translateX(100%); transition: var(--transition);
            display: flex; flex-direction: column;
        }
        .mobile-menu.active { transform: translateX(0); }
        .mobile-menu-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 3rem; }
        .mobile-nav-list { list-style: none; display: flex; flex-direction: column; gap: 1rem; overflow-y: auto; }
        .mobile-nav-link { font-size: 1.5rem; font-weight: 800; text-decoration: none; color: var(--dark); display: flex; align-items: center; justify-content: space-between; }
        .mobile-dropdown { padding-left: 1.5rem; margin-top: 0.5rem; display: none; flex-direction: column; gap: 0.8rem; border-left: 2px solid var(--slate-200); }
        .mobile-dropdown.active { display: flex; }
        .mobile-dropdown-item { font-size: 1.1rem; text-decoration: none; color: var(--slate-500); font-weight: 600; }


        /* Hero Section */
        .hero { padding: calc(var(--header-height) + 3.5rem) 0 3rem; text-align: center; }
        .hero h1 { font-size: clamp(2.4rem, 8vw, 3.8rem); font-weight: 800; line-height: 1.1; letter-spacing: -0.04em; margin-bottom: 1.5rem; }
        .hero-desc { font-size: 1.15rem; color: var(--slate-500); max-width: 800px; margin: 0 auto 2.5rem; }

        /* Tool Card Interface */
        .tool-card {
            background: var(--white); border-radius: var(--radius-xl); border: 1px solid var(--slate-200);
            box-shadow: var(--shadow-xl); padding: 1.5rem; margin-bottom: 5rem;
            transition: var(--transition);
        }
        @media (min-width: 768px) { .tool-card { padding: 3rem; } }

        .upload-area {
            border: 2.5px dashed var(--slate-300); border-radius: var(--radius-lg); padding: 4rem 1.5rem;
            text-align: center; cursor: pointer; transition: var(--transition); background: var(--slate-50);
            position: relative;
        }
        .upload-area:hover { border-color: var(--primary); background: var(--primary-soft); }
        .upload-icon { font-size: 3.5rem; display: block; margin-bottom: 1.5rem; }
        .upload-area p { font-weight: 800; color: var(--dark); font-size: 1.25rem; margin-bottom: 0.5rem; }
        .upload-area span { font-size: 0.95rem; color: var(--slate-500); }
        #fileInput { position: absolute; inset: 0; opacity: 0; cursor: pointer; }

        /* File List Reordering */
        .file-list { margin-top: 2rem; display: flex; flex-direction: column; gap: 0.75rem; }
        .file-item {
            display: flex; align-items: center; gap: 1rem; padding: 1rem;
            background: var(--white); border: 1px solid var(--slate-200);
            border-radius: 1rem; transition: var(--transition);
        }
        .file-item:hover { border-color: var(--primary); box-shadow: var(--shadow-sm); }
        .file-order-btns { display: flex; flex-direction: column; gap: 0.25rem; }
        .order-btn {
            background: var(--slate-100); border: none; border-radius: 4px; padding: 2px 6px;
            cursor: pointer; color: var(--slate-500); font-size: 0.75rem; font-weight: 800;
        }
        .order-btn:hover { background: var(--primary); color: white; }
        .file-icon { font-size: 1.5rem; }
        .file-details { flex: 1; min-width: 0; }
        .file-name { font-weight: 700; font-size: 0.95rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .file-meta { font-size: 0.8rem; color: var(--slate-500); font-weight: 600; }
        .remove-file { 
            background: #fee2e2; color: #b91c1c; border: none; width: 32px; height: 32px; 
            border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center;
            font-weight: 800; font-size: 1rem;
        }

        /* Progress Bar */
        .progress-section { margin-top: 2rem; text-align: left; }
        .progress-container { width: 100%; height: 10px; background: var(--slate-200); border-radius: 100px; overflow: hidden; margin: 0.75rem 0; }
        .progress-bar { height: 100%; width: 0%; background: var(--primary); transition: width 0.3s ease; }

        /* Buttons */
        .actions { margin-top: 2rem; display: flex; gap: 1rem; justify-content: center; }
        @media (max-width: 640px) { .actions { flex-direction: column; } }

        .btn {
            padding: 1.15rem 2.5rem; border-radius: 1.25rem; font-weight: 800; font-size: 1rem;
            cursor: pointer; transition: var(--transition); display: flex; align-items: center; justify-content: center; gap: 0.75rem; border: none;
        }
        .btn-primary { background: var(--primary); color: white; box-shadow: var(--shadow-lg); width: 100%; max-width: 320px; }
        .btn-primary:hover:not(:disabled) { transform: translateY(-3px); box-shadow: var(--shadow-xl); background: var(--primary-hover); }
        .btn-primary:disabled { background: var(--slate-300); cursor: not-allowed; opacity: 0.7; }
        .btn-outline { background: white; border: 2px solid var(--slate-200); color: var(--dark); }
        .btn-outline:hover { border-color: var(--primary); color: var(--primary); background: var(--primary-soft); }

        /* Content Sections */
        .section-padding { padding: 6rem 0; }
        .content-grid { display: grid; gap: 4rem; grid-template-columns: 1fr; }
        @media (min-width: 1024px) { .content-grid { grid-template-columns: 1fr 1fr; } }
        .content-block h2 { font-size: 2.25rem; font-weight: 800; margin-bottom: 2rem; letter-spacing: -0.04em; }
        .content-block p { font-size: 1.1rem; color: var(--slate-500); margin-bottom: 1.5rem; line-height: 1.8; }

        .faq-grid { display: grid; gap: 1.5rem; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        .faq-card { background: white; padding: 2.5rem; border-radius: 1.5rem; border: 1px solid var(--slate-200); box-shadow: var(--shadow-sm); }
        .faq-card h3 { font-weight: 800; color: var(--primary); margin-bottom: 1rem; font-size: 1.2rem; }

        .tools-grid { display: grid; gap: 1.5rem; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
        .tool-link-card {
            background: white; border: 1px solid var(--slate-200); border-radius: 1.5rem; padding: 2rem;
            text-decoration: none; color: var(--dark); transition: var(--transition); display: flex; flex-direction: column; gap: 1rem;
        }
        .tool-link-card:hover { transform: translateY(-5px); border-color: var(--primary); box-shadow: var(--shadow-lg); }
        .tool-link-card h4 { font-weight: 800; font-size: 1.2rem; }
        .tool-arrow { color: var(--primary); font-weight: 800; margin-top: auto; }

          /* Footer */
        .footer { background: #020617; color: white; padding: 6rem 0 4rem; position: relative; }
        .footer-grid { display: grid; gap: 4rem; grid-template-columns: 1fr; margin-bottom: 5rem; }
        @media (min-width: 768px) { .footer-grid { grid-template-columns: 2fr 1fr 1fr 1fr; } }
        
        .footer-brand p { color: var(--slate-400); font-size: 1rem; margin-top: 1.5rem; max-width: 350px; line-height: 1.8; }
        .footer-title { font-size: 0.9rem; font-weight: 800; text-transform: uppercase; color: var(--primary-light); letter-spacing: 0.15em; margin-bottom: 2rem; }
        .footer-links { list-style: none; display: flex; flex-direction: column; gap: 1.2rem; }
        .footer-links a { color: var(--slate-400); text-decoration: none; font-size: 1rem; font-weight: 600; transition: var(--transition); }
        .footer-links a:hover { color: white; transform: translateX(8px); }

        .footer-bottom { border-top: 1px solid rgba(255,255,255,0.08); padding-top: 3rem; display: flex; flex-direction: column; gap: 2rem; }
        @media (min-width: 768px) { .footer-bottom { flex-direction: row; justify-content: space-between; align-items: center; } }
        .social-links { display: flex; gap: 1.5rem; }
        .social-icon { width: 44px; height: 44px; border-radius: 50%; background: rgba(255,255,255,0.05); display: flex; align-items: center; justify-content: center; transition: var(--transition); border: 1px solid rgba(255,255,255,0.1); color: white; text-decoration: none; }
        .social-icon:hover { background: var(--primary); transform: translateY(-5px); border-color: var(--primary); }

        /* Animation utilities */
        .reveal { opacity: 0; transform: translateY(30px); transition: all 0.6s ease-out; }
        .reveal.active { opacity: 1; transform: translateY(0); }

        @media (max-width: 768px) {
            .hero { padding: 100px 0 40px; min-height: auto; }
            .hero-btns { flex-direction: column; align-items: stretch; padding: 0 1.5rem; }
            .section { padding: 4rem 0; }
        }
        
        /* Mobile Spacing */
        @media (max-width: 768px) {
            .section-padding { padding: 4rem 0; }
        }
        .header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--header-height);
  z-index: 1000;
  background: #ffffff;           /*  solid background */
  border-bottom: 1px solid var(--slate-200);
}

.header.scrolled {
  box-shadow: 0 6px 20px rgba(0,0,0,0.08);
}
/* smooth navigation transition */
body {
  opacity: 1;
  transition: opacity 0.18s ease;
}

body.is-leaving {
  opacity: 0;
}

    </style>
</head>
<body>

    <h1 class="seo-h1">PDF Merger ‚Äì Combine Multiple PDFs into One File Online</h1>

      <!-- Navbar -->
   <div id="navbar"></div>

    <main>
        <section class="hero">
            <div class="container">
                <div style="display:inline-flex; align-items:center; gap:0.5rem; padding:0.5rem 1.25rem; background:white; border:1px solid var(--slate-200); border-radius:100px; font-size:0.75rem; font-weight:700; color:var(--primary); margin-bottom:1.5rem; box-shadow: var(--shadow-sm);">‚ú® Local Processing: Files never leave your browser</div>
                <h1>PDF <span style="color:var(--primary)">Merger</span></h1>
                <p class="hero-desc">Combine multiple PDF documents into a single professional file in seconds. Control the exact order of pages and merge with full privacy.</p>
                
                <div class="tool-card">
                    <!-- UPLOAD SECTION -->
                    <div id="uploadContainer">
                        <div class="upload-area" id="dropZone">
                            <span class="upload-icon">üìö</span>
                            <p>Select Multiple PDF Files</p>
                            <span>Click to browse or drag & drop (Max 100MB total)</span>
                            <input type="file" id="fileInput" accept="application/pdf" multiple>
                        </div>
                    </div>

                    <!-- FILE LIST & ACTIONS -->
                    <div id="editorView" class="hidden">
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 1rem;">
                            <h3 style="font-weight: 800; font-size: 1.1rem;">Files to Merge (<span id="fileCount">0</span>)</h3>
                            <button id="addMoreBtn" style="color:var(--primary); background:none; border:none; font-weight:800; cursor:pointer;">+ Add More</button>
                        </div>
                        
                        <div class="file-list" id="fileList">
                            <!-- Items injected via JS -->
                        </div>

                        <div id="progressSection" class="hidden progress-section">
                            <div style="display:flex; justify-content:space-between; font-weight:800; font-size:0.85rem;">
                                <span id="progressStatus">Merging...</span>
                                <span id="progressText">0%</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar" id="progressBar"></div>
                            </div>
                        </div>

                        <div class="actions">
                            <button class="btn btn-primary" id="mergeBtn" disabled>ü§ù Merge PDFs</button>
                            <button class="btn btn-outline" id="resetBtn">üîÑ Reset All</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SEO Content Sections -->
        <section class="section-padding" style="background: white; border-radius: 3rem 3rem 0 0;">
            <div class="container">
                <div class="content-grid">
                    <div class="content-block">
                        <h2>How to Merge PDF Files Online</h2>
                        <p>Merging PDFs has never been easier or more secure. To get started, upload two or more PDF documents using our interactive upload zone. Once your files appear in the list, you can use the <span style="font-weight:800; color:var(--primary)">up and down arrows</span> to arrange them in the exact order you want them combined.</p>
                        <p>After clicking the "Merge PDFs" button, our browser-based engine processes the files locally using high-performance <strong>Web Assembly</strong>. The final result is available for download instantly.</p>
                    </div>
                    <div class="content-block">
                        <h2>Why Use ToolHub PDF Merger?</h2>
                        <p>Most online PDF tools upload your sensitive documents to a remote server for processing, creating a significant privacy risk. ToolHub Pro works differently: our PDF merger runs 100% in your browser. Your files never touch our servers, meaning your data stays completely under your control.</p>
                        <p>Our tool preserves the original quality of your documents, including high-resolution images, fonts, and layouts, ensuring a professional combined document every time.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="section-padding" style="background: var(--slate-100);">
            <div class="container">
                <h2 style="font-size: 2.25rem; font-weight: 800; text-align: center; margin-bottom: 3.5rem;">Frequently Asked Questions</h2>
                <div class="faq-grid">
                    <div class="faq-card">
                        <h3>Is there a limit on file size?</h3>
                        <p>Our tool handles large files up to 100MB total across all PDFs. The processing speed depends on your device's memory and CPU power since it's local.</p>
                    </div>
                    <div class="faq-card">
                        <h3>Can I reorder PDFs after uploading?</h3>
                        <p>Absolutely. You can use the order buttons on each file card to move documents up or down to ensure the merged PDF follows your preferred structure.</p>
                    </div>
                    <div class="faq-card">
                        <h3>Is this service free to use?</h3>
                        <p>Yes, ToolHub Pro PDF Merger is completely free to use with no hidden subscriptions, watermarks, or account registration requirements.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Related Tools Section -->
        <section class="section-padding">
            <div class="container">
                <h2 style="font-size: 2.2rem; font-weight: 800; margin-bottom: 3rem; text-align: center;">Related Document Tools</h2>
                <div class="tools-grid">
                    <a href="/Tools/Image Tools/PDF_To_Image.html" class="tool-link-card">
                        <span style="font-size: 2rem;">üñºÔ∏è</span>
                        <h4>PDF to Image</h4>
                        <p>Convert your PDF pages into high-quality JPG or PNG images instantly.</p>
                        <span class="tool-arrow">Try Now &rarr;</span>
                    </a>
                    <a href="/Tools/PDF Tools/Image_To_PDF.html" class="tool-link-card">
                        <span style="font-size: 2rem;">üîÑ</span>
                        <h4>Image To PDF</h4>
                        <p>Convert your images into a professional PDF document.</p>
                        <span class="tool-arrow">Try Now &rarr;</span>
                    </a>
                    <a href="#" class="tool-link-card">
                        <span style="font-size: 2rem;">‚úÇÔ∏è</span>
                        <h4>PDF Splitter</h4>
                        <p>Extract specific pages or split your PDF into multiple smaller files.</p>
                        <span class="tool-arrow">Try Now &rarr;</span>
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <div id="footer"></div>

    <script>
        // PDF-LIB alias
        const { PDFDocument } = PDFLib;

        // State
        let uploadedFiles = []; // { id, file, arrayBuffer, pageCount }

        // DOM
        const fileInput = document.getElementById('fileInput');
        const dropZone = document.getElementById('dropZone');
        const fileList = document.getElementById('fileList');
        const editorView = document.getElementById('editorView');
        const fileCountEl = document.getElementById('fileCount');
        const mergeBtn = document.getElementById('mergeBtn');
        const resetBtn = document.getElementById('resetBtn');
        const addMoreBtn = document.getElementById('addMoreBtn');
        const progressSection = document.getElementById('progressSection');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const progressStatus = document.getElementById('progressStatus');

        // Event Listeners
        fileInput.addEventListener('change', e => handleFiles(e.target.files));
        
        dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.style.borderColor = 'var(--primary)'; });
        dropZone.addEventListener('dragleave', () => { dropZone.style.borderColor = 'var(--slate-300)'; });
        dropZone.addEventListener('drop', e => {
            e.preventDefault();
            dropZone.style.borderColor = 'var(--slate-300)';
            if (e.dataTransfer.files.length) handleFiles(e.dataTransfer.files);
        });

        addMoreBtn.addEventListener('click', () => fileInput.click());
        resetBtn.addEventListener('click', () => location.reload());
        mergeBtn.addEventListener('click', mergePdfs);

        async function handleFiles(files) {
            const pdfFiles = Array.from(files).filter(f => f.type === 'application/pdf');
            if (pdfFiles.length === 0) return;

            // Update UI to show editor
            editorView.classList.remove('hidden');
            document.getElementById('uploadContainer').classList.add('hidden');

            for (let file of pdfFiles) {
                const arrayBuffer = await file.arrayBuffer();
                const id = Math.random().toString(36).substr(2, 9);
                
                try {
                    // Quick load to check validity and get page count
                    const pdfDoc = await PDFDocument.load(arrayBuffer, { ignoreEncryption: true });
                    const pageCount = pdfDoc.getPageCount();
                    
                    uploadedFiles.push({ id, file, arrayBuffer, pageCount });
                } catch (err) {
                    console.error("Error loading PDF", err);
                    alert(`Could not load ${file.name}. It might be encrypted or corrupted.`);
                }
            }
            
            renderFileList();
        }

        function renderFileList() {
            fileList.innerHTML = '';
            fileCountEl.textContent = uploadedFiles.length;
            
            uploadedFiles.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'file-item';
                div.innerHTML = `
                    <div class="file-order-btns">
                        <button class="order-btn" onclick="moveItem(${index}, -1)" ${index === 0 ? 'disabled' : ''}>‚ñ≤</button>
                        <button class="order-btn" onclick="moveItem(${index}, 1)" ${index === uploadedFiles.length - 1 ? 'disabled' : ''}>‚ñº</button>
                    </div>
                    <div class="file-icon">üìÑ</div>
                    <div class="file-details">
                        <div class="file-name">${item.file.name}</div>
                        <div class="file-meta">${item.pageCount} pages ‚Ä¢ ${formatBytes(item.file.size)}</div>
                    </div>
                    <button class="remove-file" onclick="removeFile('${item.id}')">√ó</button>
                `;
                fileList.appendChild(div);
            });

            // Enable merge button if 2+ files
            mergeBtn.disabled = uploadedFiles.length < 2;
        }

        window.moveItem = function(index, direction) {
            const newIndex = index + direction;
            if (newIndex < 0 || newIndex >= uploadedFiles.length) return;
            
            const temp = uploadedFiles[index];
            uploadedFiles[index] = uploadedFiles[newIndex];
            uploadedFiles[newIndex] = temp;
            renderFileList();
        };

        window.removeFile = function(id) {
            uploadedFiles = uploadedFiles.filter(f => f.id !== id);
            if (uploadedFiles.length === 0) {
                location.reload();
            } else {
                renderFileList();
            }
        };

        async function mergePdfs() {
            if (uploadedFiles.length < 2) return;

            mergeBtn.disabled = true;
            progressSection.classList.remove('hidden');
            progressStatus.textContent = 'Merging Documents...';
            progressBar.style.width = '10%';
            progressText.textContent = '10%';

            try {
                const mergedPdf = await PDFDocument.create();
                
                for (let i = 0; i < uploadedFiles.length; i++) {
                    const item = uploadedFiles[i];
                    const pdfDoc = await PDFDocument.load(item.arrayBuffer);
                    const copiedPages = await mergedPdf.copyPages(pdfDoc, pdfDoc.getPageIndices());
                    copiedPages.forEach((page) => mergedPdf.addPage(page));
                    
                    // Update progress
                    const pct = Math.round(((i + 1) / uploadedFiles.length) * 80) + 10;
                    progressBar.style.width = pct + '%';
                    progressText.textContent = pct + '%';
                }

                progressStatus.textContent = 'Finalizing...';
                const pdfBytes = await mergedPdf.save();
                
                progressBar.style.width = '100%';
                progressText.textContent = '100%';
                progressStatus.textContent = 'Ready!';

                // Download
                const blob = new Blob([pdfBytes], { type: 'application/pdf' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'merged-document.pdf';
                link.click();
                
                mergeBtn.textContent = '‚úÖ Downloaded';
                mergeBtn.disabled = false;

            } catch (err) {
                console.error("Merge error", err);
                alert("An error occurred while merging your PDFs. Please try again with smaller files.");
                mergeBtn.disabled = false;
                progressSection.classList.add('hidden');
            }
        }

        function formatBytes(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        }
    </script>

    <!-- js for navbar and footer -->
 <script>
fetch("/include/navbar.html")
  .then(res => res.text())
  .then(data => {
    document.getElementById("navbar").innerHTML = data;
  });

fetch("/include/footer.html")
  .then(res => res.text())
  .then(data => {
    document.getElementById("footer").innerHTML = data;
  });
</script>


<script>
document.addEventListener("click", function (e) {

  /* =========================
     MOBILE MENU OPEN
  ========================== */
  if (e.target.closest("#openMenu")) {
    const menu = document.getElementById("mobileMenu");
    if (menu) {
      menu.classList.add("active");
      document.body.style.overflow = "hidden";
    }
  }

  /* =========================
     MOBILE MENU CLOSE
  ========================== */
  if (e.target.closest("#closeMenu")) {
    const menu = document.getElementById("mobileMenu");
    if (menu) {
      menu.classList.remove("active");
      document.body.style.overflow = "";
    }
  }

  /* =========================
     MOBILE CATEGORIES DROPDOWN
     (MATCHES YOUR navbar.html)
  ========================== */
  if (e.target.closest("#mobileCatToggle")) {
    const dropdown = document.getElementById("mobileDropdown");
    if (dropdown) {
      dropdown.classList.toggle("active");
    }
  }

});

// page navigation with fade effect
document.addEventListener("click", function (e) {
  const link = e.target.closest("a");
  if (!link) return;

  const href = link.getAttribute("href");
  if (!href) return;

  // ‚ùå hash links ignore ( #popular , /index.html#popular )
  if (href.includes("#")) return;

  // ‚ùå new tab links ignore
  if (link.hasAttribute("target")) return;

  // ‚ùå external links ignore
  if (link.origin !== location.origin) return;

  // ‚ùå empty / js links ignore
  if (href === "#" || href.startsWith("javascript")) return;

  // ‚úÖ real page navigation only
  e.preventDefault();
  document.body.classList.add("is-leaving");

  setTimeout(() => {
    window.location.href = link.href;
  }, 120);
});


window.addEventListener("pageshow", function (event) {
  if (event.persisted) {
    window.location.reload();
  }
});
</script>
</body>
</html>